<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Criar Ingrediente - Sistema de Nutri칞칚o</title>
  <link rel="stylesheet" href="/css/CriarIngrediente.css">
  <link rel="stylesheet" href="/css/navbar.css">
</head>
<body>

<header class="header">
  <div class="logo-container">
    <img src="/images/logo.png" alt="Logo Nutri칞칚o" class="logo">
    <h1>Sistema de Nutri칞칚o</h1>
  </div>
  <button type="button" class="navbar-btn" onclick="window.location.href='/dashboard'">Voltar</button>
</header>

<div class="container">
  <span class="titulo-formulario">Criar Novo Ingrediente</span>

  <form id="ingredienteForm" th:action="@{/ingredientes/criar}" method="post">
    <section class="section">
      <h2 class="section-title">游닇 Informa칞칫es B치sicas</h2>
      <div class="section-content">
        <div class="form-row">
          <div class="form-group">
            <label for="nome">Nome do Ingrediente:</label>
            <input type="text" id="nome" name="nome" required placeholder="Ex: Frango, Arroz, Batata...">
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <h2 class="section-title">游꼝 Informa칞칫es Nutricionais (por 100g)</h2>
      <div class="section-content">
        <div class="grid-4">
          <div class="form-group">
            <label for="proteina">Prote칤na (g):</label>
            <input type="number" id="proteina" name="proteina" step="0.01" min="0" required placeholder="0.00">
          </div>
          <div class="form-group">
            <label for="carboidrato">Carboidrato (g):</label>
            <input type="number" id="carboidrato" name="carboidrato" step="0.01" min="0" required placeholder="0.00">
          </div>
          <div class="form-group">
            <label for="lipidio">Lip칤dio (g):</label>
            <input type="number" id="lipidio" name="lipidio" step="0.01" min="0" required placeholder="0.00">
          </div>
          <div class="form-group">
            <label for="sodio">S칩dio (mg):</label>
            <input type="number" id="sodio" name="sodio" step="0.01" min="0" required placeholder="0.00">
          </div>
          <div class="form-group">
            <label for="gorduraSaturada">Gordura Saturada (g):</label>
            <input type="number" id="gorduraSaturada" name="gorduraSaturada" step="0.01" min="0" required placeholder="0.00">
          </div>
        </div>
      </div>
    </section>
    <section class="section">
      <div class="section-content">
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Criar Ingrediente</button>
          <button type="button" class="btn btn-secondary" onclick="limparFormulario()">Limpar Formul치rio</button>
        </div>
      </div>
    </section>
  </form>
</div>

<script>
  // Fun칞칚o para limpar o formul치rio
  function limparFormulario() {
    document.getElementById('ingredienteForm').reset();
  }

  // Capturar o evento de submit do formul치rio
  document.getElementById('ingredienteForm').addEventListener('submit', function(e) {
    e.preventDefault(); // Previne o envio padr칚o do formul치rio

    const nome = document.getElementById('nome').value.trim();
    const proteina = document.getElementById('proteina').value;
    const carboidrato = document.getElementById('carboidrato').value;
    const lipidio = document.getElementById('lipidio').value;
    const sodio = document.getElementById('sodio').value;
    const gorduraSaturada = document.getElementById('gorduraSaturada').value;

    // Valida칞칚o b치sica
    if (nome === '') {
      alert('Por favor, preencha o nome do ingrediente.');
      return;
    }

    // Validar se todos os valores nutricionais s칚o n칰meros v치lidos
    const valoresNutricionais = ['proteina', 'carboidrato', 'lipidio', 'sodio', 'gorduraSaturada'];
    for (let campo of valoresNutricionais) {
      const valor = document.getElementById(campo).value;
      if (valor === '' || isNaN(valor) || parseFloat(valor) < 0) {
        alert(`Por favor, preencha um valor v치lido para ${campo}.`);
        return;
      }
    }

    // Se passou pela valida칞칚o, redirecionar para criarFichaTecnica.html
    console.log('Redirecionando para criarFichaTecnica...');
    window.location.replace('/criarFichaTecnica');
  });
</script>

</body>
</html>